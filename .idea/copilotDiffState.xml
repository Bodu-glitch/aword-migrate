<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/supabase/migrations/20250926100015_dummy.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/supabase/migrations/20250926100015_dummy.sql" />
              <option name="originalContent" value="insert into public.roots (id, root_code, root_meaning)&#10;values&#10;    (gen_random_uuid(), 'ad-, a-', 'hướng đến(ai), tác động vào(ai)'),&#10;    (gen_random_uuid(), 'inter-, dia-, per-', 'khoảng giữa, thông qua'),&#10;    (gen_random_uuid(), 'sur-, super-, trans', 'phía trên, vượt qua'),&#10;    (gen_random_uuid(), 'pre-, pro-', 'phía trước'),&#10;    (gen_random_uuid(), 'e(x)-, extr(a)-', 'ngoài, vượt qua'),&#10;    (gen_random_uuid(), 'co-, con-, com-', 'cùng, hoàn toàn, đầy đủ'),&#10;    (gen_random_uuid(), 'in-, en-, em-', 'bên trong, hoàn toàn, đầy đủ'),&#10;    (gen_random_uuid(), 'in-, un-, a-', 'không'),&#10;    (gen_random_uuid(), 'de-, sub-', 'bên dưới'),&#10;    (gen_random_uuid(), 're-', 'lại, phía sau, một cách toàn diện'),&#10;    (gen_random_uuid(), 'ab(ad)-, dis-', 'cách xa khỏi đâu, không'),&#10;    (gen_random_uuid(), 'sacr-, saint-, sanct-', 'thần thánh'),&#10;    (gen_random_uuid(), 'pri(m)-, pri(n)-', 'đầu tiên, phía trước, trước'),&#10;    (gen_random_uuid(), 'alter-, ali-', 'khác biệt'),&#10;    (gen_random_uuid(), 'amb', 'vùng xung quanh, hai phía'),&#10;    (gen_random_uuid(), 'bene-, bono-', 'tốt'),&#10;    (gen_random_uuid(), 'mag-, may-, maj-, max-', 'to'),&#10;    (gen_random_uuid(), 'mal-', 'xấu'),&#10;    (gen_random_uuid(), 'micro', 'nhỏ, vi mô'),&#10;    (gen_random_uuid(), 'mater-, metro-', 'mẹ, vật chất'),&#10;    (gen_random_uuid(), 'gli-, gla-, glo-', 'toả sáng'),&#10;    (gen_random_uuid(), 'wr-, war-, wor-', 'vặn, uốn cong'),&#10;    (gen_random_uuid(), 'ac(u)-, acer-, acro-', 'kim, sắc bén, cao chót vót'),&#10;    (gen_random_uuid(), 'phil(e)-', 'yêu, thích');&#10;&#10;with r1 as (&#10;    select id as root_id from public.roots where root_code = 'ad-, a-' limit 1&#10;)&#10;insert into public.vocab (id, root_id, word, prefix, infix, postfix, prefix_meaning, infix_meaning, postfix_meaning, phonetic)&#10;values&#10;    (gen_random_uuid(), (select root_id from r1), 'administer', 'ad', 'minister', '', 'hướng đến', 'bộ trưởng', '', '/ədˈmɪn.ɪ.stər/'),&#10;    (gen_random_uuid(), (select root_id from r1), 'adverb', 'ad', 'verb', '', 'hướng đến', 'động từ', '', '/ˈæd.vɜːb/'),&#10;    (gen_random_uuid(), (select root_id from r1), 'amaze', 'a', 'maze', '', 'hướng đến', 'mê cung', '', '/əˈmeɪz/');&#10;&#10;insert into public.vocab_senses (id, vocab_id, word, pos, definition,  sense_order)&#10;values&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'administer', 'n',&#10;    'Quản lí, chấp hành, phục vụ', 0),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'administration', 'n',&#10;    'Hành chính, quản lí, chủ quyền, chính quyền', 1),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'administrative', 'adj',&#10;    '(thuộc) hành chính, (thuộc) quản lí', 2),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'adverb' limit 1), 'adverb', 'n',&#10;    'Phó từ', 0),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'amaze' limit 1), 'amaze', 'v',&#10;    'Làm kinh ngạc', 0),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'amaze' limit 1), 'amazing', 'adj',&#10;    'Đáng ngạc nhiên, kì thú', 1),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'amaze' limit 1), 'amazement', 'n',&#10;    'Sự kinh ngạc, sự sửng sốt', 2);&#10;&#10;insert into public.vocab_examples (id, vocab_id, example_en, example_vi, example_order)&#10;values&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'The teacher administered corporal punishment.', 'Giáo viên đó đã thực hiện một hình phạt về thể xác.', 0);&#10;" />
              <option name="updatedContent" value="insert into public.roots (id, root_code, root_meaning)&#10;values&#10;    (gen_random_uuid(), 'ad-, a-', 'hướng đến(ai), tác động vào(ai)'),&#10;    (gen_random_uuid(), 'inter-, dia-, per-', 'khoảng giữa, thông qua'),&#10;    (gen_random_uuid(), 'sur-, super-, trans', 'phía trên, vượt qua'),&#10;    (gen_random_uuid(), 'pre-, pro-', 'phía trước'),&#10;    (gen_random_uuid(), 'e(x)-, extr(a)-', 'ngoài, vượt qua'),&#10;    (gen_random_uuid(), 'co-, con-, com-', 'cùng, hoàn toàn, đầy đủ'),&#10;    (gen_random_uuid(), 'in-, en-, em-', 'bên trong, hoàn toàn, đầy đủ'),&#10;    (gen_random_uuid(), 'in-, un-, a-', 'không'),&#10;    (gen_random_uuid(), 'de-, sub-', 'bên dưới'),&#10;    (gen_random_uuid(), 're-', 'lại, phía sau, một cách toàn diện'),&#10;    (gen_random_uuid(), 'ab(ad)-, dis-', 'cách xa khỏi đâu, không'),&#10;    (gen_random_uuid(), 'sacr-, saint-, sanct-', 'thần thánh'),&#10;    (gen_random_uuid(), 'pri(m)-, pri(n)-', 'đầu tiên, phía trước, trước'),&#10;    (gen_random_uuid(), 'alter-, ali-', 'khác biệt'),&#10;    (gen_random_uuid(), 'amb', 'vùng xung quanh, hai phía'),&#10;    (gen_random_uuid(), 'bene-, bono-', 'tốt'),&#10;    (gen_random_uuid(), 'mag-, may-, maj-, max-', 'to'),&#10;    (gen_random_uuid(), 'mal-', 'xấu'),&#10;    (gen_random_uuid(), 'micro', 'nhỏ, vi mô'),&#10;    (gen_random_uuid(), 'mater-, metro-', 'mẹ, vật chất'),&#10;    (gen_random_uuid(), 'gli-, gla-, glo-', 'toả sáng'),&#10;    (gen_random_uuid(), 'wr-, war-, wor-', 'vặn, uốn cong'),&#10;    (gen_random_uuid(), 'ac(u)-, acer-, acro-', 'kim, sắc bén, cao chót vót'),&#10;    (gen_random_uuid(), 'phil(e)-', 'yêu, thích');&#10;&#10;with r1 as (&#10;    select id as root_id from public.roots where root_code = 'ad-, a-' limit 1&#10;)&#10;insert into public.vocab (id, root_id, word, prefix, infix, postfix, prefix_meaning, infix_meaning, postfix_meaning, phonetic)&#10;values&#10;    (gen_random_uuid(), (select root_id from r1), 'administer', 'ad', 'minister', '', 'hướng đến', 'bộ trưởng', '', '/ədˈmɪn.ɪ.stər/'),&#10;    (gen_random_uuid(), (select root_id from r1), 'adverb', 'ad', 'verb', '', 'hướng đến', 'động từ', '', '/ˈæd.vɜːb/'),&#10;    (gen_random_uuid(), (select root_id from r1), 'amaze', 'a', 'maze', '', 'hướng đến', 'mê cung', '', '/əˈmeɪz/');&#10;&#10;insert into public.vocab_senses (id, vocab_id, word, pos, definition,  sense_order)&#10;values&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'administer', 'n',&#10;    'Quản lí, chấp hành, phục vụ', 0),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'administration', 'n',&#10;    'Hành chính, quản lí, chủ quyền, chính quyền', 1),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'administrative', 'adj',&#10;    '(thuộc) hành chính, (thuộc) quản lí', 2),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'adverb' limit 1), 'adverb', 'n',&#10;    'Phó từ', 0),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'amaze' limit 1), 'amaze', 'v',&#10;    'Làm kinh ngạc', 0),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'amaze' limit 1), 'amazing', 'adj',&#10;    'Đáng ngạc nhiên, kì thú', 1),&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'amaze' limit 1), 'amazement', 'n',&#10;    'Sự kinh ngạc, sự sửng sốt', 2);&#10;&#10;insert into public.vocab_examples (id, vocab_id, example_en, example_vi, example_order)&#10;values&#10;    (gen_random_uuid(), (select id from public.vocab where word = 'administer' limit 1), 'The teacher administered corporal punishment.', 'Giáo viên đó đã thực hiện một hình phạt về thể xác.', 0);&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/supabase/migrations/20250926132104_children_word.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/supabase/migrations/20250926132104_children_word.sql" />
              <option name="originalContent" value="-- =========================&#10;-- N-N: Người ↔ Từ (trạng thái hiện tại)&#10;-- =========================&#10;create table if not exists public.profile_vocab_progress (&#10;    profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;    vocab_id        uuid not null references public.vocab(id) on delete cascade,&#10;&#10;--     status          text not null default 'learning',  -- learning|review|mastered (tùy bạn)&#10;    proficiency     numeric(4,2) default 0.00,         -- thời gian học càng ít, trả lời đúng càng nhiều thì càng cao (0.00..1.00)&#10;    last_seen_at    timestamptz,&#10;--     next_review_at  timestamptz,&#10;    first_learned_at timestamptz default now(),&#10;&#10;    primary key (profile_id, vocab_id)&#10;    );&#10;&#10;create index if not exists idx_uvp_profile on public.profile_vocab_progress(profile_id);&#10;create index if not exists idx_uvp_vocab on public.profile_vocab_progress(vocab_id);&#10;-- create index if not exists idx_uvp_next_review on public.profile_vocab_progress(next_review_at);&#10;&#10;-- =========================&#10;-- Lịch sử: Người ↔ Từ (mỗi lượt ôn/làm bài)&#10;-- =========================&#10;-- create table if not exists public.profile_vocab_reviews (&#10;--                                                          id              uuid primary key default gen_random_uuid(),&#10;--     profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;--     vocab_id        uuid not null references public.vocab(id) on delete cascade,&#10;--&#10;--     reviewed_at     timestamptz not null default now(),&#10;--     result          smallint,           -- 0..3 (Again/Hard/Good/Easy) hoặc 0/1 đúng-sai&#10;--     latency_ms      integer,            -- thời gian trả lời&#10;--     note            text&#10;--     );&#10;--&#10;-- create index if not exists idx_uvr_profile_vocab_time&#10;--     on public.profile_vocab_reviews(profile_id, vocab_id, reviewed_at desc);&#10;&#10;-- =========================&#10;-- N-N: Người ↔ Gốc (trạng thái hiện tại)&#10;-- =========================&#10;create table if not exists public.profile_root_progress (&#10;    profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;    root_id         uuid not null references public.roots(id) on delete cascade,&#10;&#10;    started_at      timestamptz not null default now(),&#10;--     last_seen_at    timestamptz,&#10;--     mastered_ratio  numeric(5,2) default 0.00,    -- % từ của gốc đã mastered&#10;    is_learning     boolean not null default true,            -- còn học gốc này không&#10;&#10;    primary key (profile_id, root_id)&#10;    );&#10;&#10;create index if not exists idx_urp_profile on public.profile_root_progress(profile_id);&#10;create index if not exists idx_urp_root on public.profile_root_progress(root_id);&#10;&#10;&#10;-- =========================&#10;-- Child Root of Vocab (Gốc từ con của vocab)&#10;-- =========================&#10;create table if not exists public.vocab_sub_roots (&#10;    id uuid primary key default gen_random_uuid(),&#10;    vocab_id uuid not null unique references public.vocab(id) on delete cascade,&#10;    token text not null, -- gốc con&#10;    defination text, -- nghĩa gốc con&#10;    created_at timestamptz not null default now()&#10;);&#10;&#10;create index if not exists idx_vchildroot_vocab on public.vocab_sub_roots(vocab_id);&#10;&#10;-- =========================&#10;-- Sub Vocab (Từ con của gốc từ con)&#10;-- =========================&#10;create table if not exists public.sub_vocab (&#10;    id uuid primary key default gen_random_uuid(),&#10;    sub_root_id uuid not null references public.vocab_sub_roots(id) on delete cascade,&#10;    word text not null unique,&#10;    prefix text,&#10;    infix text,&#10;    postfix text,&#10;    prefix_meaning text,&#10;    infix_meaning text,&#10;    postfix_meaning text,&#10;    phonetic text,&#10;    created_at timestamptz not null default now()&#10;);&#10;&#10;create index if not exists idx_subvocab_subroot on public.sub_vocab(sub_root_id);&#10;&#10;-- =========================&#10;-- N-N: Người ↔ Gốc từ con (trạng thái hiện tại)&#10;-- =========================&#10;create table if not exists public.profile_sub_vocab_progress (&#10;    profile_id uuid not null references public.profiles(id) on delete cascade,&#10;    sub_vocab_id uuid not null references public.sub_vocab(id) on delete cascade,&#10;    started_at timestamptz not null default now(),&#10;    proficiency     numeric(4,2) default 0.00,         -- thời gian học càng ít, trả lời đúng càng nhiều thì càng cao (0.00..1.00)&#10;    last_seen_at    timestamptz,&#10;--     next_review_at  timestamptz,&#10;    first_learned_at timestamptz default now(),&#10;    primary key (profile_id, sub_vocab_id)&#10;    );&#10;&#10;&#10;-- =========================&#10;-- Sub Vocab Senses (nghĩa theo loại từ của sub_vocab)&#10;-- =========================&#10;create table if not exists public.sub_vocab_sense (&#10;    id uuid primary key default gen_random_uuid(),&#10;    sub_vocab_id uuid not null references public.sub_vocab(id) on delete cascade,&#10;    word text not null,&#10;    pos pos_type not null,&#10;    definition text not null,&#10;    sense_order smallint default 1,&#10;    created_at timestamptz not null default now(),&#10;    unique (sub_vocab_id, word, pos)&#10;);&#10;&#10;create index if not exists idx_subvocabsense_subvocab on public.sub_vocab_sense(sub_vocab_id);&#10;&#10;-- =========================&#10;-- Sub Vocab Examples (ví dụ của sub_vocab)&#10;-- =========================&#10;create table if not exists public.sub_vocab_example (&#10;    id uuid primary key default gen_random_uuid(),&#10;    sub_vocab_id uuid not null references public.sub_vocab(id) on delete cascade,&#10;    example_en text not null,&#10;    example_vi text,&#10;    example_order smallint default 1,&#10;    created_at timestamptz not null default now()&#10;);&#10;&#10;create index if not exists idx_subvocabexample_subvocab on public.sub_vocab_example(sub_vocab_id);&#10;&#10;&#10;create table if not exists public.profile_sub_root_progress (&#10;    profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;    sub_root_id         uuid not null references public.vocab_sub_roots(id) on delete cascade,&#10;&#10;    started_at      timestamptz not null default now(),&#10;    --     last_seen_at    timestamptz,&#10;--     mastered_ratio  numeric(5,2) default 0.00,    -- % từ của gốc đã mastered&#10;    is_learning     boolean not null default true,            -- còn học gốc này không&#10;&#10;    primary key (profile_id, sub_root_id)&#10;    );&#10;&#10;create index if not exists idx_urp_profile_sub on public.profile_sub_root_progress(profile_id);&#10;create index if not exists idx_urp_root_sub on public.profile_sub_root_progress(sub_root_id);" />
              <option name="updatedContent" value="-- =========================&#10;-- N-N: Người ↔ Từ (trạng thái hiện tại)&#10;-- =========================&#10;create table if not exists public.profile_vocab_progress (&#10;    profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;    vocab_id        uuid not null references public.vocab(id) on delete cascade,&#10;&#10;--     status          text not null default 'learning',  -- learning|review|mastered (tùy bạn)&#10;    proficiency     numeric(4,2) default 0.00,         -- thời gian học càng ít, trả lời đúng càng nhiều thì càng cao (0.00..1.00)&#10;    last_seen_at    timestamptz,&#10;--     next_review_at  timestamptz,&#10;    first_learned_at timestamptz default now(),&#10;&#10;    primary key (profile_id, vocab_id)&#10;    );&#10;&#10;create index if not exists idx_uvp_profile on public.profile_vocab_progress(profile_id);&#10;create index if not exists idx_uvp_vocab on public.profile_vocab_progress(vocab_id);&#10;-- create index if not exists idx_uvp_next_review on public.profile_vocab_progress(next_review_at);&#10;&#10;-- =========================&#10;-- Lịch sử: Người ↔ Từ (mỗi lượt ôn/làm bài)&#10;-- =========================&#10;-- create table if not exists public.profile_vocab_reviews (&#10;--                                                          id              uuid primary key default gen_random_uuid(),&#10;--     profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;--     vocab_id        uuid not null references public.vocab(id) on delete cascade,&#10;--&#10;--     reviewed_at     timestamptz not null default now(),&#10;--     result          smallint,           -- 0..3 (Again/Hard/Good/Easy) hoặc 0/1 đúng-sai&#10;--     latency_ms      integer,            -- thời gian trả lời&#10;--     note            text&#10;--     );&#10;--&#10;-- create index if not exists idx_uvr_profile_vocab_time&#10;--     on public.profile_vocab_reviews(profile_id, vocab_id, reviewed_at desc);&#10;&#10;-- =========================&#10;-- N-N: Người ↔ Gốc (trạng thái hiện tại)&#10;-- =========================&#10;create table if not exists public.profile_root_progress (&#10;    profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;    root_id         uuid not null references public.roots(id) on delete cascade,&#10;&#10;    started_at      timestamptz not null default now(),&#10;--     last_seen_at    timestamptz,&#10;--     mastered_ratio  numeric(5,2) default 0.00,    -- % từ của gốc đã mastered&#10;    is_learning     boolean not null default true,            -- còn học gốc này không&#10;&#10;    primary key (profile_id, root_id)&#10;    );&#10;&#10;create index if not exists idx_urp_profile on public.profile_root_progress(profile_id);&#10;create index if not exists idx_urp_root on public.profile_root_progress(root_id);&#10;&#10;&#10;-- =========================&#10;-- Child Root of Vocab (Gốc từ con của vocab)&#10;-- =========================&#10;create table if not exists public.vocab_sub_roots (&#10;    id uuid primary key default gen_random_uuid(),&#10;    vocab_id uuid not null unique references public.vocab(id) on delete cascade,&#10;    token text not null, -- gốc con&#10;    defination text, -- nghĩa gốc con&#10;    created_at timestamptz not null default now()&#10;);&#10;&#10;create index if not exists idx_vchildroot_vocab on public.vocab_sub_roots(vocab_id);&#10;&#10;-- =========================&#10;-- Sub Vocab (Từ con của gốc từ con)&#10;-- =========================&#10;create table if not exists public.sub_vocab (&#10;    id uuid primary key default gen_random_uuid(),&#10;    sub_root_id uuid not null references public.vocab_sub_roots(id) on delete cascade,&#10;    word text not null unique,&#10;    prefix text,&#10;    infix text,&#10;    postfix text,&#10;    prefix_meaning text,&#10;    infix_meaning text,&#10;    postfix_meaning text,&#10;    phonetic text,&#10;    created_at timestamptz not null default now()&#10;);&#10;&#10;create index if not exists idx_subvocab_subroot on public.sub_vocab(sub_root_id);&#10;&#10;-- =========================&#10;-- N-N: Người ↔ Gốc từ con (trạng thái hiện tại)&#10;-- =========================&#10;create table if not exists public.profile_sub_vocab_progress (&#10;    profile_id uuid not null references public.profiles(id) on delete cascade,&#10;    sub_vocab_id uuid not null references public.sub_vocab(id) on delete cascade,&#10;    started_at timestamptz not null default now(),&#10;    proficiency     numeric(4,2) default 0.00,         -- thời gian học càng ít, trả lời đúng càng nhiều thì càng cao (0.00..1.00)&#10;    last_seen_at    timestamptz,&#10;--     next_review_at  timestamptz,&#10;    first_learned_at timestamptz default now(),&#10;    primary key (profile_id, sub_vocab_id)&#10;    );&#10;&#10;&#10;-- =========================&#10;-- Sub Vocab Senses (nghĩa theo loại từ của sub_vocab)&#10;-- =========================&#10;create table if not exists public.sub_vocab_sense (&#10;    id uuid primary key default gen_random_uuid(),&#10;    sub_vocab_id uuid not null references public.sub_vocab(id) on delete cascade,&#10;    word text not null,&#10;    pos pos_type not null,&#10;    definition text not null,&#10;    sense_order smallint default 1,&#10;    created_at timestamptz not null default now(),&#10;    unique (sub_vocab_id, word, pos)&#10;);&#10;&#10;create index if not exists idx_subvocabsense_subvocab on public.sub_vocab_sense(sub_vocab_id);&#10;&#10;-- =========================&#10;-- Sub Vocab Examples (ví dụ của sub_vocab)&#10;-- =========================&#10;create table if not exists public.sub_vocab_example (&#10;    id uuid primary key default gen_random_uuid(),&#10;    sub_vocab_id uuid not null references public.sub_vocab(id) on delete cascade,&#10;    example_en text not null,&#10;    example_vi text,&#10;    example_order smallint default 1,&#10;    created_at timestamptz not null default now()&#10;);&#10;&#10;create index if not exists idx_subvocabexample_subvocab on public.sub_vocab_example(sub_vocab_id);&#10;&#10;&#10;create table if not exists public.profile_sub_root_progress (&#10;    profile_id         uuid not null references public.profiles(id) on delete cascade,&#10;    sub_root_id         uuid not null references public.vocab_sub_roots(id) on delete cascade,&#10;&#10;    started_at      timestamptz not null default now(),&#10;    --     last_seen_at    timestamptz,&#10;--     mastered_ratio  numeric(5,2) default 0.00,    -- % từ của gốc đã mastered&#10;    is_learning     boolean not null default true,            -- còn học gốc này không&#10;&#10;    primary key (profile_id, sub_root_id)&#10;    );&#10;&#10;create index if not exists idx_urp_profile_sub on public.profile_sub_root_progress(profile_id);&#10;create index if not exists idx_urp_root_sub on public.profile_sub_root_progress(sub_root_id);" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>